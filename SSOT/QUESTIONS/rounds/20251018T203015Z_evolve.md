# Question Evolution Round - 2025-10-18T20:30:15Z

## Generated Questions (50)

```json
{
  "questions": [
    {
      "id": "Q_001",
      "area": "Data",
      "question": "How do we validate PII hashing salt rotation without service interruption?",
      "why_it_matters": "GDPR requires salt rotation; current Q_070 lacks rotation test without downtime",
      "evidence_anchor": ["core/security.py", "SSOT/SPEC/INTENT_CAPSULE.md"],
      "acceptance_signal": "Salt rotates every 90d, old/new salts coexist for 24h, zero auth failures",
      "urgency": "P0",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_002",
      "area": "Features",
      "question": "What monitoring detects >0.1% train/serve skew in Feature Store?",
      "why_it_matters": "Q_057 in_progress but lacks alerting; skew causes model degradation",
      "evidence_anchor": ["core/feature_store.py", "agents/data_quality.py"],
      "acceptance_signal": "Alert fires within 5min when online/offline features differ >0.1%",
      "urgency": "P0",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_003",
      "area": "Strategy",
      "question": "How does MMM agent handle missing holiday controls in revenue model?",
      "why_it_matters": "A_009 open; holidays significantly impact revenue, missing controls bias estimates",
      "evidence_anchor": ["agents/mmm_agent.py", "SSOT/COVERAGE/queue.json"],
      "acceptance_signal": "MMM model includes 15+ major holidays, estimates validate within 10% MAPE",
      "urgency": "P1",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_004",
      "area": "Execution",
      "question": "What prevents duplicate bid mutations when Kafka retries identical messages?",
      "why_it_matters": "Q_127 open; duplicate bids cause budget overruns",
      "evidence_anchor": ["agents/bid_guidance_agent.py", "core/message_bus.py"],
      "acceptance_signal": "Same bid mutation_id sent twice results in single API call, logged",
      "urgency": "P0",
      "owner_hint": "Execution"
    },
    {
      "id": "Q_005",
      "area": "Risk",
      "question": "How does activation agent validate budget limits before API push?",
      "why_it_matters": "Q_082/Q_103 open; missing validation risks overspend",
      "evidence_anchor": ["agents/activation_agent.py"],
      "acceptance_signal": "Exceed total_budget or max_budget returns 400 with reason, no API call made",
      "urgency": "P0",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_006",
      "area": "Observability",
      "question": "What distributed trace spans capture end-to-end API request flow?",
      "why_it_matters": "Q_078 open; E2E tracing essential for latency debugging",
      "evidence_anchor": ["core/tracing.py", "infrastructure/api_gateway.py"],
      "acceptance_signal": "Jaeger shows span from API gateway→agent→database→response with <5s total",
      "urgency": "P0",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_007",
      "area": "Secrets",
      "question": "How do we audit that no API keys exist in environment variables?",
      "why_it_matters": "Q_090 open; env vars logged/exposed, Secret Manager mandatory",
      "evidence_anchor": ["core/security.py", ".env.template"],
      "acceptance_signal": "CI scan fails if any secret pattern found in env vars or code",
      "urgency": "P0",
      "owner_hint": "Governance"
    },
    {
      "id": "Q_008",
      "area": "CI/CD",
      "question": "What test gate prevents deployment if any test fails?",
      "why_it_matters": "Q_092 open; deploying broken code causes production incidents",
      "evidence_anchor": [".github/workflows/deploy.yaml", "tests/"],
      "acceptance_signal": "Deploy workflow exits with code 1 if pytest fails, no Docker push",
      "urgency": "P0",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_009",
      "area": "Compliance",
      "question": "How does compliance agent block ads targeting users under age 18?",
      "why_it_matters": "Q_097 open; regulatory violations risk fines",
      "evidence_anchor": ["agents/compliance_agent.py"],
      "acceptance_signal": "Targeting config with age<18 returns 403, logged to audit_log",
      "urgency": "P0",
      "owner_hint": "Governance"
    },
    {
      "id": "Q_010",
      "area": "Infra",
      "question": "What webhook HMAC algorithm and secret rotation schedule do we use?",
      "why_it_matters": "Q_098 open; weak HMAC enables spoofing attacks",
      "evidence_anchor": ["agents/webhook_receiver.py", "core/security.py"],
      "acceptance_signal": "HMAC-SHA256, secret rotates every 90d, invalid signature returns 401",
      "urgency": "P0",
      "owner_hint": "Execution"
    },
    {
      "id": "Q_011",
      "area": "Observability",
      "question": "What PagerDuty integration ensures P0 alerts arrive within 2 minutes?",
      "why_it_matters": "Q_100 open; delayed alerts increase incident MTTR",
      "evidence_anchor": ["infrastructure/alertmanager.yaml", "agents/alert_agent.py"],
      "acceptance_signal": "Simulate P0 error, PagerDuty page arrives <120s with incident details",
      "urgency": "P0",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_012",
      "area": "Features",
      "question": "How does Feature Store enforce MIN_RECORDS=100 before training?",
      "why_it_matters": "Q_101 open; small samples cause statistical noise",
      "evidence_anchor": ["core/feature_store.py", "agents/mmm_agent.py"],
      "acceptance_signal": "get_training_data with 99 records raises ValueError, logs warning",
      "urgency": "P0",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_013",
      "area": "Risk",
      "question": "What circuit breaker latency ensures all executions stop within 5 seconds?",
      "why_it_matters": "Q_140 open; slow kill-switch defeats emergency stop purpose",
      "evidence_anchor": ["core/circuit_breaker.py"],
      "acceptance_signal": "Trigger kill-switch, all agent executions halt <5s, metric emitted",
      "urgency": "P0",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_014",
      "area": "Data",
      "question": "How does identity resolution handle cross-device matching below 85% confidence?",
      "why_it_matters": "Spec shows 85% threshold but no fallback for borderline cases",
      "evidence_anchor": ["agents/identity_resolution.py"],
      "acceptance_signal": "Match score 0.75-0.84 creates provisional profile, merged after 3 sessions",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_015",
      "area": "Strategy",
      "question": "What seasonality controls does MMM include for Q4 holiday spike?",
      "why_it_matters": "Revenue models without seasonal controls misattribute holiday lift to channels",
      "evidence_anchor": ["agents/mmm_agent.py"],
      "acceptance_signal": "Model includes Q4_indicator, Black_Friday, Cyber_Monday covariates",
      "urgency": "P1",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_016",
      "area": "Execution",
      "question": "How does activation agent handle partial API failures mid-batch?",
      "why_it_matters": "Batch activation with 1 failure may leave inconsistent state",
      "evidence_anchor": ["agents/activation_agent.py"],
      "acceptance_signal": "Rollback all changes if any item fails, or mark partial_success with retry list",
      "urgency": "P1",
      "owner_hint": "Execution"
    },
    {
      "id": "Q_017",
      "area": "RAG",
      "question": "What minimum similarity threshold ensures RAG retrieves relevant documents?",
      "why_it_matters": "Low threshold pollutes LLM context with irrelevant sources",
      "evidence_anchor": ["agents/llm_guardrails.py", "core/rag_retriever.py"],
      "acceptance_signal": "Threshold=0.7, queries with max_score<0.7 return 'insufficient_context'",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_018",
      "area": "Governance",
      "question": "How does JWT middleware extract and validate user roles for RBAC?",
      "why_it_matters": "Q_075 open; missing RBAC allows unauthorized data access",
      "evidence_anchor": ["infrastructure/api_gateway.py", "core/rbac.py"],
      "acceptance_signal": "No token returns 401, invalid role returns 403, valid grants access",
      "urgency": "P0",
      "owner_hint": "Governance"
    },
    {
      "id": "Q_019",
      "area": "Observability",
      "question": "What Prometheus metric tracks LLM call cost per model and task?",
      "why_it_matters": "Cost visibility essential for FinOps budget control",
      "evidence_anchor": ["core/llm_guardrails.py", "agents/crisis_detection.py"],
      "acceptance_signal": "mbi_llm_cost_usd{model,task} increments on each call, Grafana dashboard shows",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_020",
      "area": "CI/CD",
      "question": "What pre-commit hook prevents committing secrets to git?",
      "why_it_matters": "Accidental secret commits require complex remediation",
      "evidence_anchor": [".git/hooks/pre-commit", "scripts/detect_secrets.sh"],
      "acceptance_signal": "Commit with 'api_key=' pattern blocked, error message shown",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_021",
      "area": "Compliance",
      "question": "How does policy agent verify Promo/広告 label exists in all ad copy?",
      "why_it_matters": "Missing promo labels violate regulatory requirements in Japan",
      "evidence_anchor": ["agents/compliance_agent.py"],
      "acceptance_signal": "Copy without 'Promo' or '広告' returns policy_approved=false with reason",
      "urgency": "P0",
      "owner_hint": "Governance"
    },
    {
      "id": "Q_022",
      "area": "Infra",
      "question": "What Redis TTL ensures event_id deduplication doesn't grow unbounded?",
      "why_it_matters": "Q_108 done but TTL crucial for memory management",
      "evidence_anchor": ["core/message_bus.py"],
      "acceptance_signal": "event_id keys have TTL=7d, expired keys auto-deleted",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_023",
      "area": "Data",
      "question": "How does schema validator detect drift between contract version and actual data?",
      "why_it_matters": "A_010 open; schema drift breaks downstream consumers",
      "evidence_anchor": ["agents/schema_validator.py", "core/contracts.py"],
      "acceptance_signal": "Mismatch between schema v2 and v1 data triggers drift alert within 5min",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_024",
      "area": "Strategy",
      "question": "What reconciliation logic merges conflicting MMM and MTA attribution?",
      "why_it_matters": "MMM/MTA often disagree; need principled merge strategy",
      "evidence_anchor": ["agents/mmm_agent.py", "agents/mta_agent.py"],
      "acceptance_signal": "Weighted average (MMM 70%, MTA 30%), delta logged for analysis",
      "urgency": "P1",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_025",
      "area": "Execution",
      "question": "How does creative rotation agent detect fatigue score drift over time?",
      "why_it_matters": "Static threshold misses gradual degradation",
      "evidence_anchor": ["agents/creative_intelligence.py"],
      "acceptance_signal": "7d moving average of fatigue_score, alert when trend >0.05/day",
      "urgency": "P1",
      "owner_hint": "Execution"
    },
    {
      "id": "Q_026",
      "area": "Risk",
      "question": "What approval timeout escalation prevents budget allocation from stalling indefinitely?",
      "why_it_matters": "A_011 open; pending approvals block weekly reallocation",
      "evidence_anchor": ["agents/approval_agent.py", "agents/playbook_orchestrator.py"],
      "acceptance_signal": "After 24h, escalate to CMO; after 48h, use fallback allocation",
      "urgency": "P1",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_027",
      "area": "Observability",
      "question": "What data freshness SLA alert fires when GA4 export lags >6 hours?",
      "why_it_matters": "A_012 open; stale data causes incorrect decisions",
      "evidence_anchor": ["agents/data_quality.py", "agents/analytics_agent.py"],
      "acceptance_signal": "Last GA4 record >6h old triggers P1 alert to #data-ops Slack",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_028",
      "area": "RAG",
      "question": "How does LLM verifier model differ from analyst model to prevent self-verification?",
      "why_it_matters": "Q_074 done; need architectural enforcement not just config",
      "evidence_anchor": ["config/model_registry.yaml", "agents/llm_guardrails.py"],
      "acceptance_signal": "Config with analyst=verifier rejected at load time with error",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_029",
      "area": "Governance",
      "question": "What immutable audit log implementation prevents tampering with decision history?",
      "why_it_matters": "A_015 open; compliance requires tamper-proof audit trail",
      "evidence_anchor": ["core/audit.py"],
      "acceptance_signal": "Append-only log, hash-chained entries, 7yr retention in cold storage",
      "urgency": "P1",
      "owner_hint": "Governance"
    },
    {
      "id": "Q_030",
      "area": "Data",
      "question": "How does multi-currency revenue handling prevent FX rate staleness?",
      "why_it_matters": "A_016 open; stale rates misrepresent international revenue",
      "evidence_anchor": ["core/contracts.py", "agents/e-commerce_agent.py"],
      "acceptance_signal": "FX rates refresh daily from ECB API, rates >24h old trigger alert",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_031",
      "area": "Infra",
      "question": "What rate limiter configuration prevents API abuse without blocking legitimate traffic?",
      "why_it_matters": "A_017 open; missing limits enable DoS attacks",
      "evidence_anchor": ["core/rate_limiter.py", "infrastructure/api_gateway.py"],
      "acceptance_signal": "100 req/min per IP, 1000 req/min per API key, 429 on exceed",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_032",
      "area": "Features",
      "question": "What asset fingerprinting algorithm detects duplicate creatives?",
      "why_it_matters": "A_018 open; duplicates waste testing budget",
      "evidence_anchor": ["core/asset_fingerprint.py", "agents/creative_intelligence.py"],
      "acceptance_signal": "Perceptual hash (pHash), similarity >95% flags duplicate, blocks upload",
      "urgency": "P2",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_033",
      "area": "Strategy",
      "question": "How does incrementality agent validate parallel trends assumption in DID?",
      "why_it_matters": "Violated parallel trends bias incrementality estimates",
      "evidence_anchor": ["agents/incrementality_agent.py"],
      "acceptance_signal": "Pre-period trend slope diff <10%, else switch to synthetic control",
      "urgency": "P1",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_034",
      "area": "Execution",
      "question": "What audience expansion similarity threshold ensures lookalike quality?",
      "why_it_matters": "Low similarity dilutes targeting, wastes budget",
      "evidence_anchor": ["agents/audience_expansion_agent.py"],
      "acceptance_signal": "Threshold 0.75, segments <0.75 rejected with reason logged",
      "urgency": "P1",
      "owner_hint": "Execution"
    },
    {
      "id": "Q_035",
      "area": "Backtest",
      "question": "How does A/B test agent compute statistical power before launching test?",
      "why_it_matters": "Underpowered tests waste time and budget",
      "evidence_anchor": ["agents/ab_test_agent.py"],
      "acceptance_signal": "Power calc shows >80% to detect 15% MDE, else reject with warning",
      "urgency": "P1",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_036",
      "area": "Latency",
      "question": "What Redis caching strategy reduces LLM API call latency for common queries?",
      "why_it_matters": "Repeated calls increase cost and latency",
      "evidence_anchor": ["core/llm_guardrails.py"],
      "acceptance_signal": "prompt_hash cached 24h, cache hit rate >60% after warmup",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_037",
      "area": "RAG",
      "question": "How does crisis detection agent enforce ≥2 independent sources requirement?",
      "why_it_matters": "Q_088 open; single-source claims enable false positives",
      "evidence_anchor": ["agents/crisis_detection.py"],
      "acceptance_signal": "Crisis with 1 source returns requires_verify=true, risk_score capped at 0.5",
      "urgency": "P0",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_038",
      "area": "Governance",
      "question": "What RBAC policy prevents read access to PII for non-privileged users?",
      "why_it_matters": "Broad PII access violates least-privilege principle",
      "evidence_anchor": ["core/rbac.py", "core/security.py"],
      "acceptance_signal": "SELECT on pii_mapping table requires 'pii_admin' role, else 403",
      "urgency": "P0",
      "owner_hint": "Governance"
    },
    {
      "id": "Q_039",
      "area": "Observability",
      "question": "What distributed tracing context propagation ensures spans link across services?",
      "why_it_matters": "Broken trace context prevents E2E debugging",
      "evidence_anchor": ["core/tracing.py", "agents/*"],
      "acceptance_signal": "W3C trace-context headers propagate, Jaeger shows linked spans",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_040",
      "area": "CI/CD",
      "question": "What smoke test validates core API endpoints after deployment?",
      "why_it_matters": "Broken deployment undetected until user impact",
      "evidence_anchor": [".github/workflows/deploy.yaml", "tests/smoke/"],
      "acceptance_signal": "POST /ingest/spend, GET /intelligence/mmm succeed <10s post-deploy",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_041",
      "area": "Compliance",
      "question": "How does compliance agent validate required disclaimers in financial claims?",
      "why_it_matters": "Missing disclaimers violate advertising regulations",
      "evidence_anchor": ["agents/compliance_agent.py"],
      "acceptance_signal": "Claims with 'guaranteed' require disclaimer, else rejected",
      "urgency": "P1",
      "owner_hint": "Governance"
    },
    {
      "id": "Q_042",
      "area": "Infra",
      "question": "What Kubernetes resource limits prevent memory exhaustion from agent crashes?",
      "why_it_matters": "Unbounded memory usage causes node failures",
      "evidence_anchor": ["k8s/agents/*.yaml"],
      "acceptance_signal": "Each pod has memory limit 8Gi, OOM kill restarts pod",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_043",
      "area": "Data",
      "question": "How does feature store handle feature value outliers beyond 3 sigma?",
      "why_it_matters": "Outliers skew model training and predictions",
      "evidence_anchor": ["core/feature_store.py"],
      "acceptance_signal": "Values >3σ capped at 3σ, outlier_count metric emitted",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_044",
      "area": "Strategy",
      "question": "What MMM model validation ensures MAPE <15% on holdout set?",
      "why_it_matters": "High error models produce bad allocation decisions",
      "evidence_anchor": ["agents/mmm_agent.py"],
      "acceptance_signal": "Holdout MAPE >15% rejects model, keeps previous version",
      "urgency": "P1",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_045",
      "area": "Execution",
      "question": "What pacing agent logic prevents campaign overspend beyond daily budget?",
      "why_it_matters": "Overspend accumulates to significant budget overruns",
      "evidence_anchor": ["agents/pacing_agent.py"],
      "acceptance_signal": "Spend >105% of daily budget triggers pause + P1 alert",
      "urgency": "P1",
      "owner_hint": "Execution"
    },
    {
      "id": "Q_046",
      "area": "Risk",
      "question": "What playbook trigger conditions prevent infinite loop executions?",
      "why_it_matters": "Runaway playbooks waste resources and cause cascading failures",
      "evidence_anchor": ["agents/playbook_orchestrator.py"],
      "acceptance_signal": "Max 3 executions per playbook per hour, 4th execution blocked",
      "urgency": "P1",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_047",
      "area": "Observability",
      "question": "What model drift detector measures MMM coefficient changes week-over-week?",
      "why_it_matters": "Sudden coefficient changes indicate data quality issues or market shifts",
      "evidence_anchor": ["agents/mmm_agent.py", "agents/data_quality.py"],
      "acceptance_signal": "Coefficient delta >50% triggers drift alert, retraining validation",
      "urgency": "P1",
      "owner_hint": "Risk"
    },
    {
      "id": "Q_048",
      "area": "Latency",
      "question": "What async processing pattern reduces API response time below 200ms p95?",
      "why_it_matters": "Slow APIs degrade user experience",
      "evidence_anchor": ["infrastructure/api_gateway.py", "agents/*"],
      "acceptance_signal": "Heavy compute offloaded to queue, API returns 202 with job_id <200ms",
      "urgency": "P1",
      "owner_hint": "DataOps"
    },
    {
      "id": "Q_049",
      "area": "RAG",
      "question": "How does briefing agent ensure source citations for every factual claim?",
      "why_it_matters": "Uncited claims undermine trust and violate RAG-only principle",
      "evidence_anchor": ["agents/briefing_agent.py", "agents/llm_guardrails.py"],
      "acceptance_signal": "Each claim has source_id, validation rejects outputs with missing citations",
      "urgency": "P1",
      "owner_hint": "Governance"
    },
    {
      "id": "Q_050",
      "area": "Governance",
      "question": "What automated compliance report generation frequency satisfies audit requirements?",
      "why_it_matters": "Manual reporting error-prone and time-consuming",
      "evidence_anchor": ["agents/audit_agent.py", "core/audit.py"],
      "acceptance_signal": "Weekly compliance report generated, emailed to governance@, stored 7yr",
      "urgency": "P2",
      "owner_hint": "Governance"
    }
  ]
}
```

## Summary

- **Total Questions**: 50
- **P0 Urgency**: 14 questions (critical path items)
- **P1 Urgency**: 34 questions (high-value improvements)
- **P2 Urgency**: 2 questions (nice-to-have enhancements)

### Coverage Analysis
- **Data & Features**: 8 questions (data quality, feature store, identity)
- **Strategy & Risk**: 10 questions (MMM, MTA, incrementality, playbooks)
- **Execution & Activation**: 7 questions (bids, creative, audience, pacing)
- **RAG & LLM**: 5 questions (guardrails, citations, verification)
- **Governance & Compliance**: 9 questions (RBAC, audit, policy)
- **Observability**: 7 questions (tracing, monitoring, alerting)
- **Infra & CI/CD**: 4 questions (secrets, deployment, rate limits)

### Capsule-Binding Notes
All 50 questions are formatted for direct insertion into `INTENT_CAPSULE.md` with:
- Concise titles (question field)
- Short why_it_matters (why field)
- Single-sentence acceptance signals
- ≤3 evidence anchors (targets)
- Clear urgency levels
- No overlaps with existing capsule items (Q_001-Q_050 vs existing Q_057-Q_140)
